# ğŸŒ³ Deployment Architecture

## Current Git & Render Setup

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GitHub Repository                        â”‚
â”‚                  crime-report-system                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚      â”‚             â”‚
                    â”‚  main branch â”‚      â”‚   develop   â”‚
                    â”‚  (v2.2.0)    â”‚      â”‚   branch    â”‚
                    â”‚              â”‚      â”‚             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                            â”‚                     â”‚
                            â”‚                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Render Production    â”‚  â”‚  Render Development â”‚
              â”‚  Service              â”‚  â”‚  Service            â”‚
              â”‚                       â”‚  â”‚                     â”‚
              â”‚  remise-rov8          â”‚  â”‚  remise-rov8-dev    â”‚
              â”‚  Auto-Deploy: âœ…      â”‚  â”‚  Auto-Deploy: âœ…    â”‚
              â”‚                       â”‚  â”‚                     â”‚
              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
              â”‚  â”‚ Production DB   â”‚ â”‚  â”‚  â”‚ Development DBâ”‚ â”‚
              â”‚  â”‚ (Paid)          â”‚ â”‚  â”‚  â”‚ (Free/Paid)   â”‚ â”‚
              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
              â”‚                       â”‚  â”‚                     â”‚
              â”‚  ğŸŒ Public Access     â”‚  â”‚  ğŸ” Protected      â”‚
              â”‚  users.onrender.com   â”‚  â”‚  dev.onrender.com  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Development Workflow

```
Developer's Local Machine
         â”‚
         â”‚ 1. Make changes
         â–¼
    develop branch
         â”‚
         â”‚ 2. git push origin develop
         â–¼
    GitHub (develop)
         â”‚
         â”‚ 3. Auto-deploy trigger
         â–¼
  Render Dev Service
         â”‚
         â”‚ 4. Test thoroughly
         â–¼
  âœ… Ready for production
         â”‚
         â”‚ 5. git checkout main
         â”‚    git merge develop
         â”‚    git tag v2.3.0
         â”‚    git push origin main
         â–¼
    GitHub (main)
         â”‚
         â”‚ 6. Auto-deploy trigger
         â–¼
  Render Production Service
         â”‚
         â–¼
  ğŸ‰ Live to public!
```

## Branch Protection Rules

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              main (Protected)               â”‚
â”‚                                             â”‚
â”‚  âœ… Production-ready code only              â”‚
â”‚  âœ… Tagged releases (v2.2.0, v2.3.0...)    â”‚
â”‚  âœ… Auto-deploys to production             â”‚
â”‚  âŒ No direct commits (merge only)         â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              develop (Active)               â”‚
â”‚                                             â”‚
â”‚  ğŸ”§ Active development                      â”‚
â”‚  ğŸ”§ Feature testing                         â”‚
â”‚  ğŸ”§ Auto-deploys to dev site                â”‚
â”‚  âœ… Direct commits allowed                  â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         feature/* (Temporary)               â”‚
â”‚                                             â”‚
â”‚  ğŸŒ¿ Specific features                       â”‚
â”‚  ğŸŒ¿ Merges to develop                       â”‚
â”‚  ğŸŒ¿ No auto-deploy                          â”‚
â”‚  ğŸ—‘ï¸  Delete after merge                     â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Release Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Release Cycle                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Week 1-2: Development
  â”œâ”€ Work on develop branch
  â”œâ”€ Create feature branches
  â”œâ”€ Test on dev.onrender.com
  â””â”€ Fix bugs

Week 3: Stabilization
  â”œâ”€ Code freeze on develop
  â”œâ”€ Final testing on dev site
  â”œâ”€ Fix critical bugs only
  â””â”€ Prepare release notes

Week 4: Release
  â”œâ”€ Merge develop â†’ main
  â”œâ”€ Tag version (v2.3.0)
  â”œâ”€ Auto-deploy to production
  â””â”€ Monitor for issues

After Release:
  â”œâ”€ Start new features on develop
  â”œâ”€ Hotfixes go directly to main (then back to develop)
  â””â”€ Continue cycle
```

## Environment Variables Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Variable         â”‚   Production         â”‚   Development        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NODE_ENV           â”‚ production           â”‚ development          â”‚
â”‚ DATABASE_URL       â”‚ prod-db-url          â”‚ dev-db-url           â”‚
â”‚ NEXTAUTH_URL       â”‚ remise-rov8.com      â”‚ remise-rov8-dev.com  â”‚
â”‚ CLOUDINARY_*       â”‚ production config    â”‚ dev/shared config    â”‚
â”‚ EMAIL_FROM         â”‚ noreply@domain.com   â”‚ test@resend.dev      â”‚
â”‚ RESEND_API_KEY     â”‚ production key       â”‚ test key             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

